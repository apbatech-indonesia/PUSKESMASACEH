<div class="app-inner-layout">

  <div class="card mb-3" style="border:0.5px solid grey ;">
    <div class="card-header-tab card-header">
      <div class="card-header-title font-size-lg text-capitalize fw-normal">
        <i class="header-icon lnr-charts icon-gradient bg-happy-green"> </i>
        <b style="font-size:18px;color:rgb(75, 75, 75)">GENERAL LEDGER</b>
      </div>
      <div class="btn-actions-pane-right text-capitalize">
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  [disabled]="tomboledit"  (click)="tambahmodal()"> Tambah  </button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm" *ngIf="showsimpan"  [disabled]="!profileForm.valid" (click)="tambah()" >Simpan</button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   (click)="proses(content7,'1')" >Proses</button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   (click)="hapusgl()" >Hapus GL</button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   (click)="proses(content7,'2')" >Batal Proses</button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   (click)="proseslb(content8)" >Laporan Laba Rugi</button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   (click)="prosesbb(content9)" >Laporan Buku Besar</button>
    
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  (click)="openLargemap(content6)">  Lihat </button>

      


      </div>
    </div>
    <div class="g-0 row" >
     
      <div class="col-md-12 col-lg-6">
        <ul class="list-group list-group-flush">
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading"  style="font-size:10px;color: #01244a;">NO GL :</div>
                   
                    <div class="widget-subheading">
                      <!-- (keyup.enter)="onKeyUp($event)" -->
                      <input disabled [(ngModel)]="nomutasi" style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="text" >

                    </div>
              
                  </div>
             
                </div>
              </div>
            </div>
          </li>
        
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading"  style="font-size:10px;color: #01244a;">KETERANGAN</div>
                  <form   [formGroup]="profileForm">
                    <input formControlName="keterangan" [(ngModel)]="keterangan" style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="text"   (keyup.enter)="onKeyUp($event)">
                  </form>
                  </div>
                  <div class="widget-content-right">
                     <!-- <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  *ngIf="showtransaksi" [disabled]="!profileFormfar.valid"  (click)="tambah()">Create LPB</button> -->
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading"  style="font-size:10px;color: #01244a;">Tanggal</div>
                    <input [(ngModel)]="tglpx" style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="date"   >
                  </div>
                  <div class="widget-content-right">
                     <!-- <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  *ngIf="showtransaksi" [disabled]="!profileFormfar.valid"  (click)="tambah()">Create LPB</button> -->
                  </div>
                </div>
              </div>
            </div>
          </li>
   
        </ul>
      </div>

   
    </div>
  </div>
 
  <div     class="bg-white" style="border:0.5px solid #5f5f70 ;">
         

    <div class="tableFixHeadL">
      <table  class="table">
        <thead >
          <tr >
           
           
          
           
            <th scope="col" style="color: white;background-color: #5f5f70;" >COA</th>
             
            <th scope="col" style="color:white;background-color: #5f5f70;" >keterangan</th>
          
            <th scope="col"  style="color: white;background-color: #5f5f70;" >Debit</th>
            <th scope="col"  style="color: white;background-color: #5f5f70;" >Kredit</th>
         
           
          </tr>
        </thead>

        <tbody style="font-size:12px;color:black"  >
          
        <tr *ngFor="let x of tmutasi">
           
          

         
            <td  style="width: 250px;" (click)="hapusobat(x.kdgl,x.kdcoa,x.no,x.stsd)" >
              {{x.kdcoa}} |  {{x.akun}}
            </td>
            <td >
              {{x.keterangan}}
            </td>
          
            <td>
            
              {{x.jmlrp}}
            </td>
            <td>
            
              {{x.kr}}
            </td>
          
          </tr> 

         
     



        </tbody>

    </table>
    </div>
    <div  style="background-color:#5f5f70 ;">

      <table  class="table">
        <tbody style="font-size:12px;color:black"  >
          <tr *ngFor="let x of tjumlahbawah">
           
            <td  style="width: 600px;background-color: white;border: 0.5px dashed white;" colspan="3">
              
              </td>

              <td  style="border: 1px dashed rgb(63, 63, 63);color:white">
               <b>Total Debit</b><br>
               <p>{{x.jmlrp}}</p>
                </td>
                <td  style="border: 1px dashed rgb(63, 63, 63);color:white">
                  <b>Total Debit</b><br>
                  <p>{{x.krrp}}</p>
                   </td>


            </tr>
          <tr >
            <td  style="width: 500px;border: 1px dashed rgb(63, 63, 63);">
               
              <ng-select    #select  style="border-radius: 5px;"  [items]="tobat" bindLabel="akund"  bindValue="kdakun" 
              placeholder="Supplier" [(ngModel)]="nmobat" (keyup)="cariobat($event)" (keyup.enter)="onobat($event)"  >
              </ng-select>
            </td>
            <td  style="border: 1px dashed rgb(63, 63, 63);width: 150px;">
               
            

              <select #selectd  [(ngModel)]="tipe" class="inx" style="width: 100%;"  (keyup.enter)="ontipe($event)" >
                <option value="0" >Debet</option>
                <option value="1">Kredit</option>
              
              </select>
  
            </td>
            <td  style="border: 1px dashed rgb(63, 63, 63);width: 200px;">
              <input style="width: 100%;"  [(ngModel)]="jml"  #myinputtot class="inxtot"  placeholder="Jumlah...." type="number"   (keyup.enter)="onjlml($event)">
             
              </td>

              <td  style="border: 1px dashed rgb(63, 63, 63);">
                <input style="width: 100%;"  [(ngModel)]="ket"  #myinputbatch   class="inxtot" placeholder="Keterangan...." type="text"  >
               
                </td>
                <td  style="border: 1px dashed rgb(63, 63, 63);">
               
                  <button  *ngIf="statushap ==='0'" class="btn-wide btn-pill btn btn-success btn-sm"  (click)="simpans()">Simpan Jurnal</button>

                </td>
            </tr>
        </tbody>
    </table>
      </div>

    <!-- <div  style="background-color:#5f5f70 ;" *ngIf="showtr">
      <table  class="table">
    
        <tbody style="font-size:11px;color:black"  >
          <tr >
        
            <td  style="width: 210px;">
              <ng-select    #select  style="border-radius: 5px;"  [items]="tobat" bindLabel="akund"  bindValue="kdakun" 
              placeholder="Supplier" [(ngModel)]="nmobat" (keyup)="cariobat($event)" (keyup.enter)="onobat($event)"  >
              </ng-select>
            </td>
            <td style="width: 210px;">
              <input   [(ngModel)]="ket"  #myinputbatch   class="inxtot" placeholder="Keterangan...." type="text"  (keyup.enter)="onqty($event)">
            </td>

            <td style="width: 210px;">
              <select class="inx">
                <option >Debet</option>
                <option >Kredit</option>
              
              </select>
            </td>
            

            <td style="width: 210px;">
              <input   [(ngModel)]="jml"  #myinputtot class="inxtot"  placeholder="Jumlah...." type="number"   (keyup.enter)="onjlml($event)">
             
  
            </td>
        
        
            
        
          
          </tr> 
          </tbody>
        </table>
    </div> -->
   


 <hr>

    <div class="g-0 row" >

      <div class="col-md-12 col-lg-4">
      
      </div>
    </div>

  </div>


  


  









  <div class="card-body">
    <ng-template #content6 let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h6 class="modal-title">List Pembelian</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">
        </button>
      </div>
      <div class="modal-body">

        <div class="row">
          <div class="col-md-4">
          
            <div class="input-group">
              <div class="input-group-text" >
                <div class="">
                  
                  <fa-icon [icon]="faSearch" ></fa-icon>
                </div>
              </div>
              <input placeholder="Search..."  (keyup)="caripass($event)" type="text" class="form-control">
            </div>
            
          </div>
          <div class="col-md-4">
          
          </div>
          <div class="col-md-4">
            <div class="input-group">
              <label for="exampleSelect" class="form-label"  style="color:black">Tanggal</label>
            <input style="border-radius: 5px;border:solid 1px #ccc; width: 11.5em" type="date" [(ngModel)]="tglp" (change)="ktglrad()" >
            
            </div>
          </div>
         </div>
   

         <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
         
          <th scope="col">NO GL</th>
          <th scope="col" >TGL GL</th>
         
          <th scope="col" >KETERANGAN</th>
          <th scope="col" >ACT</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let  x of tbeli">
       
          <td style="font-size: 12px;color: black;">
            {{x.kdgl}}

          </td>
         
          <td  style="font-size: 12px;color: black;">
           
            {{x.tgl}}
          </td>
          <td  style="font-size: 12px;color: black;">
            {{x.keterangan}}
     
          </td>

          <td>
           

             <div class="badge bg-pill bg-danger" (click)="pilihpasien(x.kdgl,x.keterangan,x.tgl,x.status)" >P</div>
          
          
          </td>
        </tr>


        
      
        
      </tbody>
    </table>
  </div>   

     
      </div>
      <div class="modal-footer">
      
     
      </div>
    </ng-template>











    <ng-template #content7 let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h6 class="modal-title">Proses</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">
        </button>
      </div>

      <div class="modal-body">
        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;"> Proses </label>
          <input [(ngModel)]="tgldari"   placeholder="Pasien" type="date" class="form-control">

  
        </div>
     
        </div>

        <div class="modal-footer">
          <button *ngIf="tombolp === '1'" type="button" class="btn btn-secondary"  (click)="prosesgl()">Proses GL </button>
          <button *ngIf="tombolp === '2'" type="button" class="btn btn-secondary"  (click)="prosesglbatal()">Batal Proses GL </button>
       
        </div>
    </ng-template>
 


  
    <ng-template #content8 let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h6 class="modal-title">Laporan</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">
        </button>
      </div>

      <div class="modal-body">
        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;"> Laporan </label>
          <input [(ngModel)]="tgldari"   placeholder="Pasien" type="date" class="form-control">

  
        </div>
     
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary"  (click)="laprl()">Laporan Laba Rugi </button>
       
        </div>
    </ng-template>



    
    <ng-template #content9 let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h6 class="modal-title">Laporan Buku Besar</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">
        </button>
      </div>

      <div class="modal-body">



        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;">COA </label>

          <select [(ngModel)]="pcoa" style="font-size:12px;" class="form-select" >
            <option value="" >SEMUA</option>
            <option *ngFor="let x of tcoa" value="x.kdakun">{{x.akun}}</option>
      
           

          </select>
        </div>



        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;"> Dari  </label>
          <input [(ngModel)]="tgldari"   placeholder="Pasien" type="date" class="form-control">

  
        </div>
     

        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;"> Sampai </label>
          <input [(ngModel)]="tglsampai"   placeholder="Pasien" type="date" class="form-control">

  
        </div>



        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary"  (click)="laprlx()">Laporan Buku Besar </button>
       
        </div>
    </ng-template>


  </div>
  
</div>