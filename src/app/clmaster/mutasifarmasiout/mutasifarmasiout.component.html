<div class="app-inner-layout">

  <div class="card mb-3" style="border:0.5px solid grey ;">
    <div class="card-header-tab card-header">
      <div class="card-header-title font-size-lg text-capitalize fw-normal">
        <i class="header-icon fa fa-bar-chart icon-gradient bg-happy-green"> </i>
        <b style="font-size:18px;color:rgb(75, 75, 75)">MUTASI KELUAR</b>
      </div>
      <div class="btn-actions-pane-right text-capitalize">
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  [disabled]="tomboledit"  (click)="tambahmodal()"> Tambah  </button>
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm" [disabled]="!profileFormfar.valid"  (click)="tambah()" >Simpan</button>

        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"    (click)="hapusall()"> Hapus</button>
        <!-- <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   [disabled]="tombolbatal" (click)="batalt()"> Batal</button> -->
        <!-- <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"   [disabled]="tombolmobat"(click)="goToLink()"> M.Obat</button> -->
        <div class="d-inline-block" ngbDropdown>

      
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"
          type="button" ngbDropdownToggle> Cetak</button>
         <div ngbDropdownMenu class="dropdown-menu-rounded">
          <h6 class="dropdown-header">Cetak Faktur</h6>
          <button class="dropdown-item" [disabled]="tombolcetak"  (click)="cetakfaktur()">Faktur Mutasi In</button>
          <!-- <button class="dropdown-item" (click)="openlaporan(content7,'1')">Faktur Priodik</button>
          <button class="dropdown-item" (click)="openlaporan(content7,'2')">Faktur Barang Priodik</button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item" (click)="openlaporan(content7,'3')">Faktur Suplier Priodik Detail</button> -->
        </div>
        </div>
   
        <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  (click)="openLargemap(content6)">  Lihat </button>

      


      </div>
    </div>
    <div class="g-0 row" >
     
      <div class="col-md-12 col-lg-6">
        <ul class="list-group list-group-flush">
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading"  style="font-size:10px;color: #01244a;">NO MUTASI :</div>
                   
                    <div class="widget-subheading">
                      <!-- (keyup.enter)="onKeyUp($event)" -->
                      <input disabled [(ngModel)]="nomutasi" style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="text" >

                    </div>
              
                  </div>
             
                </div>
              </div>
            </div>
          </li>
        
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading" style="font-size:10px;color: #01244a;">SUPLIER</div>
                    <!-- <input style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="text" > -->
                    <form [formGroup]="profileFormfar" >
                  

                      <input  formControlName="suplier"  [(ngModel)]="suplier"  style="border-radius: 5px;border:solid 1px #ccc;width: 15em" 
                      placeholder="Hasil..." type="text" (keyup)="carisup($event)">
                      <div *ngIf="tsupshow">
               <p *ngFor="let x of tsupplier" (click)="pilihsup(x.kdsup,x.nama)">{{x.nama}}</p>
              </div>  

              <input  formControlName="kdsuplier" hidden  [(ngModel)]="kdsuplier"  style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="text" > 

                    </form>
                  </div>
                  <!-- <div class="widget-content-right">
                    <div class="widget-numbers text-primary">$12.6k</div>
                  </div> -->
                </div>
              </div>
            </div>
          </li>
   
        </ul>
      </div>

      <div class="col-md-12 col-lg-6">
        <ul class="list-group list-group-flush">
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading"  style="font-size:10px;color: #01244a;">GUDANG :</div>
                    <div class="widget-subheading">
                      <form [formGroup]="profileFormfar" >
                      <select formControlName="kdgudang" [(ngModel)]="kdgudang"  style="border-radius: 5px;border:solid 1px #ccc; width: 11.5em">
                        <option  *ngFor="let x of tgudang" value="{{x.kdgudang}}">{{x.gudang}}</option>
                       
                      </select>
                      </form>
                    </div>
                  </div>
                
                </div>
              </div>
            </div>
          </li>
          <li class="bg-transparent list-group-item">
            <div class="widget-content p-0">
              <div class="widget-content-outer">
                <div class="widget-content-wrapper">
                  <div class="widget-content-left">
                    <div class="widget-heading"  style="font-size:10px;color: #01244a;">KETERANGAN</div>
                    <input [(ngModel)]="keterangan" style="border-radius: 5px;border:solid 1px #ccc" placeholder="Hasil..." type="text"   (keyup.enter)="onKeyUp($event)">
                  </div>
                  <div class="widget-content-right">
                     <!-- <button class="btn-wide btn-outline-2x me-md-2 btn btn-outline-focus btn-sm"  *ngIf="showtransaksi" [disabled]="!profileFormfar.valid"  (click)="tambah()">Create LPB</button> -->
                  </div>
                </div>
              </div>
            </div>
          </li>

        </ul>
      </div>
   
    </div>
  </div>
  <!-- *ngIf="!showtransaksi"-->

  <div     class="bg-white" style="border:0.5px solid grey ;">
         

    <div class="tableFixHeadL">
      <table  class="table">
        <thead >
          <tr >
           
           
          
           
            <th scope="col" style="color: #01244a;background-color: #cecbcb;" >Obat</th>
            <th scope="col"  style="color: #01244a;background-color: #cecbcb;" >Satuan</th>
         
            <th scope="col" style="color: #01244a;background-color: #cecbcb;" >Qty</th>
          
          </tr>
        </thead>

        <tbody style="font-size:11px;color:black"  >
          
        <tr *ngFor="let x of tmutasi">
           
          

         
            <td  style="width: 210px;" (click)="hapusobat(x.nomutasi,x.nomor,x.kdobat,x.qty,x.obat,x.standart)">
             {{x.obat}}
            </td>
            <td >
              {{x.standart}}
            </td>
          
            <td>
              {{x.qty}}
          
            </td>
          
          </tr> 

         
     



        </tbody>

    </table>
    </div>

    <div  style="background-color:#cecbcb ;" *ngIf="showtr">
      <table  class="table">
    
        <tbody style="font-size:11px;color:black"  >
          <tr >
        
            <td  style="width: 210px;">
              <ng-select    #select  style="border-radius: 5px;"  [items]="tobat" bindLabel="obat"  bindValue="kdobat" 
              placeholder="Supplier" [(ngModel)]="nmobat" (keyup)="cariobat($event)" (keyup.enter)="onobat($event)" (click)="onobatx($event)" >
              </ng-select>
            </td>
           
            <td style="width: 210px;">
             
              <select [(ngModel)]="ttsatuan"  class="inx">
                <option *ngFor="let x of tsatuan" value="{{x.standart}}">{{x.standart}}</option>
                <option *ngFor="let x of tsatuan" value="{{x.sedang}}">{{x.sedang}}</option>
                <option *ngFor="let x of tsatuan" value="{{x.kemasan}}">{{x.kemasan}}</option>
           
              </select>
  
            </td>
          
            <td style="width: 210px;">
              <input   [(ngModel)]="qty"  #myinput  class="inx" placeholder="Qty...." type="number"  (keyup.enter)="onqty($event)">
            </td>
        
          
          </tr> 
          </tbody>
        </table>
    </div>
   


 <hr>

    <div class="g-0 row" >

      <div class="col-md-12 col-lg-4">
      
      </div>
    </div>

  </div>


  


  









  <div class="card-body">
    <ng-template #content6 let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h6 class="modal-title">List Pembelian</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">
        </button>
      </div>
      <div class="modal-body">

        <div class="row">
          <div class="col-md-4">
          
            <div class="input-group">
              <div class="input-group-text" >
                <div class="">
                  
                  <fa-icon [icon]="faSearch" ></fa-icon>
                </div>
              </div>
              <input placeholder="Search..."  (keyup)="caripass($event)" type="text" class="form-control">
            </div>
            
          </div>
          <div class="col-md-4">
            <div class="input-group">
         
            <select [(ngModel)]="caripas" style="font-size:12px;" class="form-select" (change)="onChange($event.target.value)">
              <option value="1" >By NoFaktur</option>
              <option value="2" >By Suplier</option>
  
            </select>
          </div>
          </div>
          <div class="col-md-4">
            <div class="input-group">
              <label for="exampleSelect" class="form-label"  style="color:black">Tanggal</label>
            <input style="border-radius: 5px;border:solid 1px #ccc; width: 11.5em" type="date" [(ngModel)]="tglp" (change)="ktglrad()" >
            
            </div>
          </div>
         </div>
   

         <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
         
          <th scope="col">NO FAKTUR</th>
          <th scope="col" >TGL FAKTUR</th>
         
          <th scope="col" >SUPLIER</th>
          <th scope="col" >ACT</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let  x of tbeli">
       
          <td style="font-size: 12px;color: black;">
            {{x.nomutasi}}

          </td>
         
          <td  style="font-size: 12px;color: black;">
           
            {{x.tgl}}
          </td>
          <td  style="font-size: 12px;color: black;">
            {{x.nama}}
     
          </td>

          <td>
    

             <div class="badge bg-pill bg-danger" (click)="pilihpasien(x.nomutasi,x.tgl,x.kdsuplier,x.kdgudang,x.keterangan,x.nama)" >P</div>
          
          
          </td>
        </tr>


        
      
        
      </tbody>
    </table>
  </div>   

     
      </div>
      <div class="modal-footer">
      
     
      </div>
    </ng-template>











    <ng-template #content7 let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h6 class="modal-title">Laporan</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')">
        </button>
      </div>

      <div class="modal-body">
        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;"> DARI </label>
          <input [(ngModel)]="tgldari"   placeholder="Pasien" type="date" class="form-control">

  
        </div>
     
        <div class="position-relative mb-3">
          <label for="exampleEmail" class="form-label" style="font-weight: bold;"> SAMPAI </label>
          <input [(ngModel)]="tglsampai"   placeholder="Pasien" type="date" class="form-control">

  
        </div>
        <!-- <div class="position-relative mb-3"  *ngIf="num2">
      

          <input type="checkbox"  value="Bike" [(ngModel)]="detaillap">
          <label for="vehicle1"> Detail</label>
        </div> -->
        </div>

        <div class="modal-footer">
          <button type="button" *ngIf="num1" class="btn btn-secondary"  (click)="cetakfakturp()">Lihat </button>
          <button type="button"  *ngIf="num2" class="btn btn-secondary"  (click)="cetakfakturbp()">Lihat </button>.
          <button type="button"  *ngIf="num2" class="btn btn-secondary"  (click)="cetakd()">Lihat Detail</button>
          <button type="button" *ngIf="num3" class="btn btn-secondary"  (click)="cetakfaktursp()">Lihat </button>
       
        </div>
    </ng-template>
 


  



  </div>
  
</div>